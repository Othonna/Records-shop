<?phpnamespace App\DataFixtures;use App\Entity\Artist;use App\Entity\Categorie;use App\Entity\Product;use Discogs\ClientFactory;use Doctrine\Bundle\FixturesBundle\Fixture;use Doctrine\Persistence\ObjectManager;use Faker;class AppDiscogs extends Fixture{    public function load(ObjectManager $manager)    {        $faker = Faker\Factory::create("fr_FR");        $discogs = ClientFactory::factory([            'defaults' => [                'query' => [                    'token' => 'jLOEFWQWosmzLDvwaKRYOOepSjlbXZlnsyLiSmNI',                ],            ]        ]);            $tables = [                'ambient',                'house',                'hip-hop',                'electronic'            ];            foreach ($tables as $i => $table ) {                $categorie = new Categorie();                $categorie->setName($table);                $this->addReference('categorie-'. $i, $categorie);                $manager->persist($categorie);            }            for ($i = 1; $i <= 9 ; $i++) {                    $artist = new Artist();                    $artist->setName($discogs->getArtist(['id' => $i ])['name']);                    $manager->persist($artist);                $albums = $discogs->getArtistReleases(['id' => $i ])['releases'];                foreach ($albums as $album) {                    $categorie = $this->getReference('categorie-'.rand(0, count($tables) - 1) );                    $product = new Product();                    $product->setName($album['title'])                            ->setReleaseAt(new \DateTime())                            ->setPrice($faker->numberBetween(10, 40))                            ->setStyle($album['type'])                            ->setImage($album['thumb'])                            ->setArtist($artist)                            ->setCategorie($categorie);                    $manager->persist($product);                }            }        $manager->flush();    }}